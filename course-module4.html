<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flutter Interview Course - Module 4: Routing & Navigation</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

    :root {
      --primary: #00FFA3;
      --primary-dark: #02140f;
      --accent: #00c67f;
      --muted: #9ed7be;
      --bg: #010807;
      --card: rgba(3, 12, 10, 0.95);
      --border: rgba(0, 255, 163, 0.25);
      --text: #E8FFF5;
      --text-dim: #9ed7be;
      --shadow: 0 35px 90px rgba(0, 0, 0, 0.65);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at 20% 10%, rgba(0, 255, 163, 0.15), transparent 50%),
                  radial-gradient(circle at 80% 0%, rgba(0, 255, 163, 0.08), transparent 45%),
                  linear-gradient(135deg, #000000, #02110d 60%, #000000 100%);
      color: var(--text);
      min-height: 100vh;
      padding: 40px 16px 70px;
    }

    .course-shell {
      max-width: 1150px;
      margin: 0 auto;
      border-radius: 34px;
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.04);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }

    header {
      padding: 70px 45px;
      text-align: center;
      background: linear-gradient(120deg, rgba(0, 0, 0, 0.9), rgba(0, 255, 163, 0.18));
      position: relative;
    }

    header::after {
      content: '';
      position: absolute;
      inset: 18px;
      border-radius: 26px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      pointer-events: none;
      opacity: 0.7;
    }

    header h1 {
      font-size: clamp(2.2rem, 4vw, 3.4rem);
      color: var(--text);
      margin: 16px auto;
      max-width: 800px;
    }

    header p {
      color: var(--text-dim);
      font-size: 1.08rem;
      max-width: 760px;
      margin: 0 auto;
      line-height: 1.85;
      position: relative;
      z-index: 1;
    }

    .module-pill {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 30px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.2);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-weight: 700;
      color: var(--text);
      position: relative;
      z-index: 1;
    }

    .quick-stats {
      margin-top: 32px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 18px;
      position: relative;
      z-index: 1;
    }

    .stat-card {
      padding: 22px;
      border-radius: 20px;
      background: rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.08);
      text-align: center;
    }

    .stat-card span {
      display: block;
      font-size: 2.2rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 6px;
    }

    .content {
      padding: 58px 55px 45px;
      display: flex;
      flex-direction: column;
      gap: 50px;
    }

    .lesson-divider {
      padding: 34px;
      border-radius: 26px;
      background: linear-gradient(125deg, rgba(0, 255, 163, 0.18), rgba(0, 0, 0, 0.7));
      border: 1px solid var(--border);
      position: relative;
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.55);
    }

    .lesson-divider::after {
      content: '';
      position: absolute;
      bottom: 16px;
      left: 50%;
      width: 60%;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transform: translateX(-50%);
    }

    .lesson-divider h2 {
      font-size: clamp(1.8rem, 3vw, 2.2rem);
      margin-bottom: 10px;
      color: var(--text);
    }

    .lesson-divider span {
      color: var(--text-dim);
      font-size: 0.98rem;
    }

    .analogy-box {
      margin-top: 24px;
      padding: 26px;
      border-radius: 22px;
      background: rgba(0, 0, 0, 0.55);
      border-left: 6px solid #FDD835;
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      gap: 20px;
    }

    .analogy-emoji { font-size: 2.6rem; }

    .concept-grid {
      margin-top: 28px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 22px;
    }

    .concept-card {
      padding: 26px;
      border-radius: 22px;
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.08);
      min-height: 190px;
      box-shadow: inset 0 0 30px rgba(0, 255, 163, 0.08);
    }

    h3 { margin-bottom: 12px; font-size: 1.4rem; color: var(--text); }
    p { color: var(--text-dim); line-height: 1.85; }

    .code-block {
      background: #03140f;
      border: 1px solid rgba(0, 255, 163, 0.2);
      border-radius: 20px;
      padding: 26px;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.95rem;
      line-height: 1.7;
      color: var(--text);
      margin: 24px 0;
      box-shadow: inset 0 0 35px rgba(0, 255, 163, 0.08);
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 34px 0;
      border-radius: 22px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    }

    .comparison-table th {
      background: linear-gradient(135deg, rgba(0, 255, 163, 0.25), rgba(0, 0, 0, 0.85));
      padding: 18px;
      text-align: left;
      color: var(--text);
      letter-spacing: 0.05em;
    }

    .comparison-table td {
      padding: 18px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      color: var(--text-dim);
      background: rgba(0, 0, 0, 0.4);
    }

    tr:nth-child(even) td { background: rgba(0, 255, 163, 0.05); }

    .tip-card {
      margin: 24px 0;
      padding: 22px;
      border-radius: 20px;
      background: linear-gradient(120deg, rgba(0, 0, 0, 0.8), rgba(0, 255, 163, 0.08));
      border: 1px solid rgba(0, 255, 163, 0.25);
      color: var(--text);
    }

    .interview-section {
      padding: 34px;
      border-radius: 26px;
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
      margin-top: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    }

    .qa-item { margin-bottom: 22px; }
    .question { color: var(--primary); font-weight: 700; }

    .navigation-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: center;
      margin-top: 40px;
    }

    .nav-button {
      padding: 16px 30px;
      border-radius: 999px;
      background: linear-gradient(130deg, rgba(0, 255, 163, 0.3), rgba(0, 0, 0, 0.85));
      color: var(--text);
      text-decoration: none;
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-weight: 700;
      letter-spacing: 0.08em;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      min-width: 230px;
      text-align: center;
      box-shadow: 0 25px 55px rgba(0, 0, 0, 0.55);
    }

    .nav-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 35px 70px rgba(0, 0, 0, 0.6);
    }

    @media (max-width: 900px) {
      header, .content { padding: 40px 26px; }
      .concept-grid { grid-template-columns: 1fr; }
      .course-shell { border-radius: 24px; }
    }

    @media (max-width: 600px) {
      body { padding: 20px 10px 50px; }
      .content { padding: 32px 20px; }
      .navigation-buttons { flex-direction: column; }
      .nav-button { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="course-shell">
    <header>
      <div class="module-pill">Module 4 of 8 ¬∑ Routing & Navigation</div>
      <h1>Guide Users Through Your Flutter Worlds</h1>
      <p>Navigation determines how users move between stories in your app. In this module you will master Navigator APIs, named routes, Navigation 2.0, deep links, and nested flows so your app always knows where to go and how to get back safely.</p>
      <div class="quick-stats">
        <div class="stat-card"><span>3</span>Hands-on lessons</div>
        <div class="stat-card"><span>9</span>Code walkthroughs</div>
        <div class="stat-card"><span>8</span>Interview prompts</div>
      </div>
    </header>

    <main class="content">
      <section class="lesson-divider" id="lesson1">
        <h2>Lesson 4.1 ¬∑ Imperative Navigation</h2>
        <span>Navigator stack, push/pop/pushReplacement, passing and returning data</span>
        <div class="analogy-box">
          <div class="analogy-emoji">üìö</div>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Think of your app as a magical storybook. Every time you call <strong>Navigator.push</strong>, you're placing a new chapter on top of the stack. <strong>Navigator.pop</strong> removes the top chapter so you can re-read the previous one. The bookmark (Route) remembers where to return when you're done.</p>
          </div>
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>Navigator.push</h3>
            <p>Creates a <em>MaterialPageRoute</em> (or custom Route) and adds it to the stack. Flutter rebuilds the new screen while keeping previous ones alive underneath.</p>
          </article>
          <article class="concept-card">
            <h3>Navigator.pop</h3>
            <p>Removes the current route. Optionally returns a value which the previous screen awaits using <code>await Navigator.push</code>.</p>
          </article>
          <article class="concept-card">
            <h3>pushReplacement & pushAndRemoveUntil</h3>
            <p>Swap the current route or clear parts of the stack to prevent users from navigating back to certain screens (e.g., after login).</p>
          </article>
        </div>
        <div class="code-block">
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => const ProfileScreen(),
  ),
);

final result = await Navigator.push<String>(
  context,
  MaterialPageRoute(
    builder: (_) => const ColorPickerScreen(),
  ),
);

if (result != null) {
  setState(() => _favoriteColor = result);
}

Navigator.pushReplacement(
  context,
  MaterialPageRoute(builder: (_) => const Dashboard()),
);

Navigator.pushAndRemoveUntil(
  context,
  MaterialPageRoute(builder: (_) => const HomeScreen()),
  (route) => route.settings.name == '/login',
);
        </div>
        <div class="tip-card">
          <strong>Interview Tip:</strong> Explain how navigating inside async methods requires checking <code>context.mounted</code> in Flutter 3+ so you avoid calling Navigator after the widget is disposed.
        </div>
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Recommended API</th>
              <th>Why</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Standard forward navigation</td>
              <td><code>Navigator.push</code></td>
              <td>Preserves history so users can go back.</td>
            </tr>
            <tr>
              <td>Replace login screen with dashboard</td>
              <td><code>pushReplacement</code></td>
              <td>Prevents returning to login with back button.</td>
            </tr>
            <tr>
              <td>Clear stack after checkout</td>
              <td><code>pushAndRemoveUntil</code></td>
              <td>Prunes previous routes to avoid duplicate orders.</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="lesson-divider" id="lesson2">
        <h2>Lesson 4.2 ¬∑ Named Routes & Route Guards</h2>
        <span>Centralized route tables, arguments, and pre-navigation checks</span>
        <div class="analogy-box">
          <div class="analogy-emoji">üó∫Ô∏è</div>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Named routes are like giving every room in a museum a label. Instead of saying ‚Äúgo through the third door on the left,‚Äù you say ‚Äúgo to Room Dinos.‚Äù Maps are easier to follow than step-by-step instructions.</p>
          </div>
        </div>
        <div class="code-block">
return MaterialApp(
  initialRoute: '/',
  routes: {
    '/': (context) => const HomeScreen(),
    '/details': (context) => const DetailsScreen(),
  },
  onGenerateRoute: (settings) {
    if (settings.name == '/profile') {
      final userId = settings.arguments as String;
      return MaterialPageRoute(
        builder: (_) => ProfileScreen(userId: userId),
      );
    }
    return null; // Falls through to onUnknownRoute
  },
  onUnknownRoute: (_) => MaterialPageRoute(
    builder: (_) => const NotFoundScreen(),
  ),
);

Navigator.pushNamed(
  context,
  '/profile',
  arguments: 'user-42',
);
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>Centralized routing</h3>
            <p>Keep all pages in one file for easier audits and analytics. Add route guards to restrict access (e.g., check auth token before returning a route).</p>
          </article>
          <article class="concept-card">
            <h3>Deep links</h3>
            <p>Use <code>onGenerateInitialRoutes</code> or the new <code>RouteInformationParser</code> to translate incoming URLs into stack states. Perfect for marketing campaigns.</p>
          </article>
          <article class="concept-card">
            <h3>Hero animations</h3>
            <p>Named routes still support Hero tags. Ensure hero names are unique per stack to avoid conflicts.</p>
          </article>
        </div>
        <div class="tip-card">
          <strong>Security Reminder:</strong> Never trust incoming route arguments blindly. Validate IDs, sanitize strings, and consider using strongly typed navigation helpers.
        </div>
      </section>

      <section class="lesson-divider" id="lesson3">
        <h2>Lesson 4.3 ¬∑ Navigation 2.0 & Nested Flows</h2>
        <span>Declarative Router API, BottomNav stacks, deep linking, and URL syncing</span>
        <div class="analogy-box">
          <div class="analogy-emoji">üß≠</div>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Navigation 1.0 is like telling a friend ‚Äúwalk forward, then turn left.‚Äù Navigation 2.0 is drawing the entire map and letting Flutter pick the steps. You describe the destination state instead of pushing instructions.</p>
          </div>
        </div>
        <div class="code-block">
class AppRouterDelegate extends RouterDelegate<AppRoute>
    with ChangeNotifier, PopNavigatorRouterDelegateMixin<AppRoute> {
  final GlobalKey<NavigatorState> navigatorKey = GlobalKey();
  AppPage currentPage = AppPage.home;

  @override
  Widget build(BuildContext context) {
    final pages = <Page<dynamic>>[
      MaterialPage(child: HomeScreen(onOpenDetails: _handleDetails)),
      if (currentPage == AppPage.details)
        const MaterialPage(child: DetailsScreen()),
    ];

    return Navigator(
      key: navigatorKey,
      pages: pages,
      onPopPage: (route, result) {
        if (!route.didPop(result)) return false;
        currentPage = AppPage.home;
        notifyListeners();
        return true;
      },
    );
  }
}
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>Why Navigation 2.0?</h3>
            <p>Web-style URLs, state restoration, and nested flows (tabs, wizards) are easier when the entire stack is described declaratively.</p>
          </article>
          <article class="concept-card">
            <h3>Bottom navigation stacks</h3>
            <p>Give every tab its own <code>Navigator</code> inside a <code>IndexedStack</code> so switching tabs preserves scroll positions.</p>
          </article>
          <article class="concept-card">
            <h3>Route-aware widgets</h3>
            <p>Use <code>RouteObserver</code> to know when analytics pages become visible. Essential for conversion funnels.</p>
          </article>
        </div>
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th>Navigation 1.0</th>
              <th>Navigation 2.0</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>API style</td>
              <td>Imperative push/pop</td>
              <td>Declarative page list</td>
            </tr>
            <tr>
              <td>URL synchronization</td>
              <td>Manual</td>
              <td>Built-in through Router</td>
            </tr>
            <tr>
              <td>Multiple stacks</td>
              <td>Workarounds with GlobalKeys</td>
              <td>Native using nested Navigators</td>
            </tr>
            <tr>
              <td>Learning curve</td>
              <td>Lower</td>
              <td>Higher but future-proof</td>
            </tr>
          </tbody>
        </table>
        <div class="tip-card">
          <strong>Pro Workflow:</strong> Start with Navigation 1.0 for MVP speed, then abstract navigation into a service. Moving to Router API later becomes a recursive refactor instead of a rewrite.
        </div>
      </section>

      <section class="interview-section">
        <h3>üéØ Interview Drill</h3>
        <div class="qa-item">
          <p class="question">Q1. How do you return data when popping a route?</p>
          <p>A: Await <code>Navigator.push</code> and pass the value to <code>Navigator.pop(context, value)</code>. The awaiting screen receives the result after the new route is removed.</p>
        </div>
        <div class="qa-item">
          <p class="question">Q2. Why would you prefer <code>pushReplacement</code> over <code>push</code>?</p>
          <p>A: When you don't want the user returning to the previous screen (e.g., splash ‚Üí home, auth ‚Üí dashboard). Replacement keeps memory low and history clean.</p>
        </div>
        <div class="qa-item">
          <p class="question">Q3. How do you guard routes that require authentication?</p>
          <p>A: In <code>onGenerateRoute</code>, check auth state before returning a route. Redirect unauthorized users to login and optionally attach the intended route for after-login navigation.</p>
        </div>
        <div class="qa-item">
          <p class="question">Q4. Explain the benefit of nested Navigators in tab bars.</p>
          <p>A: Each tab maintains its own navigation stack, so switching tabs doesn't lose scroll position or internal state. Improves UX for marketplace apps.</p>
        </div>
        <div class="qa-item">
          <p class="question">Q5. When should you reach for Navigation 2.0?</p>
          <p>A: When you need deep linking, state restoration, or complex flows that depend on the entire stack state (e.g., e-commerce checkout, multi-step onboarding).</p>
        </div>
        <div class="qa-item">
          <p class="question">Q6. How can you observe route transitions?</p>
          <p>A: Add a <code>RouteObserver<PageRoute></code> to <code>MaterialApp</code> and have widgets mix in <code>RouteAware</code>. Useful for analytics and pausing media.</p>
        </div>
      </section>

      <div class="navigation-buttons">
        <a class="nav-button" href="course-module3.html">‚Üê Module 3: State Management</a>
        <a class="nav-button" href="course-index.html">Back to Course Index</a>
        <a class="nav-button" href="course-module5.html">Module 5: Advanced Concepts ‚Üí</a>
      </div>
    </main>
  </div>
</body>
</html>
