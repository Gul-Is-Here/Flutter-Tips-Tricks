<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flutter Interview Course - Module 5: Advanced Concepts</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');

    :root {
      --primary: #ff9a56;
      --secondary: #fe53bb;
      --accent: #00f5d4;
      --bg: #050914;
      --panel: rgba(12, 18, 34, 0.9);
      --border: rgba(255, 255, 255, 0.12);
      --text: #e2e8f0;
      --muted: #94a3b8;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Space Grotesk', 'Inter', sans-serif;
      background: linear-gradient(115deg, rgba(254, 83, 187, 0.25), transparent 60%),
                  radial-gradient(circle at 75% 20%, rgba(0, 245, 212, 0.2), transparent 40%),
                  var(--bg);
      color: var(--text);
      padding: 40px 16px;
      min-height: 100vh;
    }

    .module-wrapper {
      max-width: 1100px;
      margin: 0 auto;
      border-radius: 32px;
      border: 1px solid var(--border);
      box-shadow: 0 40px 120px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      background: rgba(3, 7, 18, 0.9);
    }

    header {
      padding: 64px 40px;
      text-align: center;
      background: linear-gradient(135deg, rgba(255,154,86,0.35), rgba(254,83,187,0.35));
    }

    .module-pill {
      display: inline-flex;
      padding: 12px 32px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.3);
      letter-spacing: 0.12em;
      font-weight: 600;
      margin-bottom: 18px;
    }

    h1 {
      font-size: clamp(2.3rem, 4vw, 3.6rem);
      margin-bottom: 16px;
    }

    .subtitle {
      max-width: 820px;
      margin: 0 auto;
      line-height: 1.8;
      color: var(--muted);
    }

    .content {
      padding: 50px 40px 40px;
      display: flex;
      flex-direction: column;
      gap: 50px;
    }

    .lesson-divider {
      padding: 32px;
      border-radius: 28px;
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
    }

    .lesson-divider h2 { font-size: 2rem; margin-bottom: 10px; }
    .lesson-divider span { color: var(--muted); }

    .analogy-box {
      margin-top: 20px;
      padding: 24px;
      border-radius: 20px;
      border-left: 4px solid var(--accent);
      background: rgba(0, 245, 212, 0.08);
      display: flex;
      gap: 18px;
      align-items: center;
    }

    .analogy-box .emoji { font-size: 2.5rem; }

    p { line-height: 1.75; color: var(--muted); }

    .concept-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 24px;
    }

    .concept-card {
      padding: 22px;
      border-radius: 20px;
      background: var(--panel);
      border: 1px solid var(--border);
    }

    .code-block {
      margin: 26px 0;
      background: #050f23;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 24px;
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      overflow-x: auto;
      line-height: 1.6;
    }

    .code-keyword { color: #7dd3fc; }
    .code-string { color: #f9a8d4; }
    .code-number { color: #facc15; }
    .code-comment { color: #475569; }

    .tip-card, .warning-card {
      padding: 20px;
      border-radius: 18px;
      margin: 20px 0;
    }

    .tip-card {
      background: rgba(0, 245, 212, 0.08);
      border: 1px solid rgba(0, 245, 212, 0.3);
      color: #a7f3d0;
    }

    .warning-card {
      background: rgba(255, 122, 198, 0.08);
      border: 1px solid rgba(255, 122, 198, 0.3);
      color: #fecdd3;
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid var(--border);
      margin: 28px 0;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 16px;
      text-align: left;
    }

    .comparison-table th {
      background: rgba(255,255,255,0.05);
    }

    .comparison-table tr + tr td {
      border-top: 1px solid rgba(255,255,255,0.05);
    }

    .interview-section {
      padding: 32px;
      border-radius: 24px;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
    }

    .interview-section h3 { font-size: 1.8rem; margin-bottom: 20px; }
    .qa-item { margin-bottom: 18px; }
    .question { color: var(--primary); font-weight: 600; }

    .navigation-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      margin-top: 30px;
    }

    .nav-button {
      padding: 14px 26px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      text-decoration: none;
      color: var(--text);
      font-weight: 600;
      background: linear-gradient(120deg, rgba(255,154,86,0.2), rgba(254,83,187,0.2));
    }

    @media (max-width: 768px) {
      header, .content { padding: 40px 20px; }
      .concept-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="module-wrapper">
    <header>
      <div class="module-pill">Module 5 of 8 ¬∑ Advanced Concepts</div>
      <h1>Bring Your Flutter Apps to Life</h1>
      <p class="subtitle">This module dives into the moving pieces that make production Flutter apps feel polished: lifecycle awareness, animation craftsmanship, and platform-level integrations with graceful error handling.</p>
    </header>

    <main class="content">
      <section class="lesson-divider" id="lesson1">
        <h2>Lesson 5.1 ¬∑ App Lifecycle & Observers</h2>
        <span>Lifecycle states, WidgetsBindingObserver, RouteObserver, and background tasks</span>
        <div class="analogy-box">
          <span class="emoji">üéõÔ∏è</span>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Your app is like a smart lamp. When someone leaves the room (app goes to background), the lamp dims to save power. When they come back (resumed), it brightens again. Observers are like motion sensors telling you what to do.</p>
          </div>
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>Lifecycle states</h3>
            <p><strong>resumed</strong>, <strong>inactive</strong>, <strong>paused</strong>, and <strong>detached</strong> describe how close your widget tree is to the screen. Use them to pause animations, save drafts, or close sockets.</p>
          </article>
          <article class="concept-card">
            <h3>WidgetsBindingObserver</h3>
            <p>Mix into State classes to react to <code>didChangeAppLifecycleState</code>, <code>didChangeMetrics</code>, and <code>didHaveMemoryPressure</code>.</p>
          </article>
          <article class="concept-card">
            <h3>RouteObserver</h3>
            <p>Track when pages appear/disappear for analytics or to pause videos when the user navigates elsewhere.</p>
          </article>
        </div>
        <div class="code-block">
class LifecycleAwareState extends State<HomePage>
    with WidgetsBindingObserver, RouteAware {
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    if (state == AppLifecycleState.paused) {
      audioPlayer.pause();
    } else if (state == AppLifecycleState.resumed) {
      audioPlayer.play();
    }
  }

  @override
  void dispose() {
    WidgetsBinding.instance.removeObserver(this);
    super.dispose();
  }
}
        </div>
        <div class="tip-card">
          <strong>Pro Tip:</strong> Combine lifecycle callbacks with persistence (SharedPreferences, Hive) to autosave form progress when users background the app.
        </div>
      </section>

      <section class="lesson-divider" id="lesson2">
        <h2>Lesson 5.2 ¬∑ Animation Systems</h2>
        <span>Implicit vs explicit animations, AnimationController, Hero transitions, physics</span>
        <div class="analogy-box">
          <span class="emoji">üé†</span>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Implicit animations are like automatic doors‚Äîthey glide without you worrying about the motor. Explicit animations are like remote-control cars‚Äîyou steer every frame.</p>
          </div>
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>Implicit Animations</h3>
            <p><code>AnimatedContainer</code>, <code>AnimatedOpacity</code>, and friends animate between values automatically. Ideal for micro-interactions.</p>
          </article>
          <article class="concept-card">
            <h3>Explicit Animations</h3>
            <p><code>AnimationController</code> orchestrates complex sequences, curves, and hero transitions. Gives full control over duration and status.</p>
          </article>
          <article class="concept-card">
            <h3>Hero & Physics</h3>
            <p>Hero widgets share element tags across routes. Physics-based animations (SpringSimulation) mimic real-world movement.</p>
          </article>
        </div>
        <div class="code-block">
class PulseButton extends StatefulWidget {
  const PulseButton({super.key});

  @override
  State<PulseButton> createState() => _PulseButtonState();
}

class _PulseButtonState extends State<PulseButton>
    with SingleTickerProviderStateMixin {
  late final AnimationController controller = AnimationController(
    vsync: this,
    duration: const Duration(milliseconds: 600),
  )..repeat(reverse: true);

  late final Animation<double> scale = Tween(begin: 1.0, end: 1.1)
      .chain(CurveTween(curve: Curves.easeInOut))
      .animate(controller);

  @override
  Widget build(BuildContext context) {
    return ScaleTransition(
      scale: scale,
      child: FloatingActionButton(
        onPressed: () {},
        child: const Icon(Icons.mic),
      ),
    );
  }

  @override
  void dispose() {
    controller.dispose();
    super.dispose();
  }
}
        </div>
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th>Implicit</th>
              <th>Explicit</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Setup time</td>
              <td>1-2 lines</td>
              <td>Controller + Tween</td>
            </tr>
            <tr>
              <td>Control</td>
              <td>Automatic</td>
              <td>Manual (repeat, reverse, status)</td>
            </tr>
            <tr>
              <td>Use cases</td>
              <td>Buttons, cards, simple transitions</td>
              <td>Coordinated scenes, Hero, custom painters</td>
            </tr>
          </tbody>
        </table>
        <div class="warning-card">
          <strong>Remember:</strong> Dispose every AnimationController or you will leak the Ticker and your app will spam the console with "A Ticker was left running" warnings.
        </div>
      </section>

      <section class="lesson-divider" id="lesson3">
        <h2>Lesson 5.3 ¬∑ Platform Powers & Error Handling</h2>
        <span>Platform channels, isolates, error boundaries, and debugging workflow</span>
        <div class="analogy-box">
          <span class="emoji">üõ∞Ô∏è</span>
          <div>
            <h3>Explain Like You're 5</h3>
            <p>Platform channels are like walkie-talkies between Flutter and native land. Each side speaks its own language but agrees on message formats.</p>
          </div>
        </div>
        <div class="concept-grid">
          <article class="concept-card">
            <h3>MethodChannel</h3>
            <p>Invoke small native APIs (Bluetooth, sensors). Structure payloads as JSON-friendly types.</p>
          </article>
          <article class="concept-card">
            <h3>EventChannel & Streams</h3>
            <p>Receive continuous updates (accelerometer, location). Remember to cancel subscriptions.</p>
          </article>
          <article class="concept-card">
            <h3>Error Boundaries</h3>
            <p><code>FlutterError.onError</code> for synchronous tree errors, <code>PlatformDispatcher.instance.onError</code> for asynchronous zones.</p>
          </article>
        </div>
        <div class="code-block">
class BatteryChannel {
  static const _channel = MethodChannel('samples.flutter.dev/battery');

  Future<int> level() async {
    try {
      final result = await _channel.invokeMethod<int>('getBatteryLevel');
      return result ?? -1;
    } on PlatformException catch (e) {
      debugPrint('Battery error: ${e.message}');
      return -1;
    }
  }
}

void main() {
  FlutterError.onError = (details) {
    FlutterError.presentError(details);
    FirebaseCrashlytics.instance.recordFlutterError(details);
  };

  runZonedGuarded(
    () => runApp(const MyApp()),
    (error, stack) => FirebaseCrashlytics.instance.recordError(error, stack),
  );
}
        </div>
        <div class="tip-card">
          <strong>Performance Insight:</strong> Use <code>compute()</code> or <code>Isolate.run()</code> for heavy JSON parsing to keep the UI thread responsive.
        </div>
      </section>

      <section class="interview-section">
        <h3>üéØ Interview Drill</h3>
        <div class="qa-item">
          <p class="question">1. How do you pause audio when the app is backgrounded?</p>
          <p>Mix in <code>WidgetsBindingObserver</code> and pause in <code>AppLifecycleState.paused</code>, resume in <code>resumed</code>.</p>
        </div>
        <div class="qa-item">
          <p class="question">2. Difference between implicit and explicit animations?</p>
          <p>Implicit widgets animate between old/new values automatically, explicit animations use controllers for fine-grained control.</p>
        </div>
        <div class="qa-item">
          <p class="question">3. When would you use <code>Hero</code> animations?</p>
          <p>To visually connect matching elements between routes (e.g., card ‚Üí details) for continuity.</p>
        </div>
        <div class="qa-item">
          <p class="question">4. How do you report uncaught async errors?</p>
          <p>Wrap <code>runApp</code> in <code>runZonedGuarded</code> and forward to Crashlytics/Sentry.</p>
        </div>
        <div class="qa-item">
          <p class="question">5. What are the channel message type limitations?</p>
          <p>Only primitive types, Lists, Maps, and Uint8List. Convert custom objects to Maps.</p>
        </div>
        <div class="qa-item">
          <p class="question">6. Why use isolates?</p>
          <p>Heavy CPU work (encryption, parsing) blocks the UI thread; isolates offload work without jank.</p>
        </div>
      </section>

      <div class="navigation-buttons">
        <a class="nav-button" href="course-module4.html">‚Üê Module 4: Routing & Navigation</a>
        <a class="nav-button" href="course-index.html">Back to Course Index</a>
        <a class="nav-button" href="course-module6.html">Module 6: Performance & Optimization ‚Üí</a>
      </div>
    </main>
  </div>
</body>
</html>
